<!DOCTYPE html>
<html lang="vi">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Quản lý sản phẩm</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="/css/Style_QuanLySanPham.css">
</head>

<body>
	<!-- Navbar -->
	<nav id="navbar">
		<div class="nav-left">
			<div class="logo-wrapper flex items-center">
				<img src="/img/processed_no_white.png" alt="Logo" />
				<div class="logo-title">Gundam Shop</div>
			</div>
		</div>
		<div class="nav-right flex items-center">
			<label>Tài khoản |</label>
			<a href="#"><img src="/img/Screenshot_2025-06-19_220523-removebg-preview.png" alt="Tài khoản" /></a>
		</div>
	</nav>

	<!-- Taskbar -->
	<div class="taskbar">
		 <a href="/CodeAdmin/QuanLySanPham.html" title="Quản lý sản phẩm"><img src="/img/box.png" alt="" /></a>
    <a href="/CodeAdmin/QuanLyTaiKhoan.html" title="Quản lý tài khoản"><img src="/img/account.png" alt="" /></a>
    <a href="/CodeAdmin/QuanLyDonHang.html" title="Quản lý đơn hàng"><img src="/img/booking.png" alt="" /></a>
    <a href="/CodeAdmin/QuanLyDanhGia.html" title="Quản lý đánh giá"><img src="/img/review.png" alt="" /></a>
    <a href="/CodeAdmin/QuanLyBanner.html" title="Quản lý banner"><img src="/img/advertisement.png" alt="" /></a>
    <a href="/CodeAdmin/QuanLyThanhToan.html" title="Quản lý thanh toán"><img src="/img/credit-card.png" alt="" /></a>
    <a href="/CodeAdmin/QuanLyXacNhanDonHang.html" title="Quản lý Xác Nhận Đơn Hàng"><img src="/img/changes.png" alt="" /></a>
	</div>

	<!-- PHẦN CHÍNH -->
	<div class="main">
		<h1>Quản lý sản phẩm</h1>

		<table>
			<thead>
				<tr>
					<th>Mã SP</th>
					<th>Ảnh sản phẩm</th>
					<th>Tên sản phẩm</th>
					<th>Mô tả</th>
					<th>Thương hiệu</th>
					<th>Mã loại</th>
					<th>Hành động</th>
				</tr>
			</thead>
			<tbody id="productTable">
				<tr>
					<td>SP001</td>
					<td><img src="/img/gundam-rx78.jpg" alt="Gundam RX-78" width="60" class="mx-auto block"></td>
					<td>Gundam RX-78</td>
					<td>Mẫu Gundam cổ điển</td>
					<td>Bandai</td>
					<td>HG</td>
					<td>
						<button class="action-btn" onclick="editProduct(this)">Sửa</button>
						<button class="action-btn ml-2 text-red-600" onclick="deleteProduct(this)">Xóa</button>
					</td>
				</tr>
				<tr>
					<td>SP002</td>
					<td><img src="/img/gundam-barbatos.jpg" alt="Gundam Barbatos" width="60" class="mx-auto block"></td>
					<td>Gundam Barbatos</td>
					<td>Thiết kế mạnh mẽ</td>
					<td>Bandai</td>
					<td>MG</td>
					<td>
						<button class="action-btn" onclick="editProduct(this)">Sửa</button>
						<button class="action-btn ml-2 text-red-600" onclick="deleteProduct(this)">Xóa</button>
					</td>
				</tr>
			</tbody>
		</table>

		<!-- FORM SỬA -->
		<div class="edit-form" id="editForm" style="display: none;">
			<h3>Sửa sản phẩm</h3>
			<form id="formEdit" onsubmit="return false;">
				<input type="hidden" id="editMaSP">

				<label>Ảnh sản phẩm (URL):</label>
				<input type="text" id="editAnhSP">

				<label>Tên sản phẩm:</label>
				<input type="text" id="editTenSP">

				<label>Mô tả chung:</label>
				<textarea id="editMoTa"></textarea>

				<label>Thương hiệu:</label>
				<input type="text" id="editThuongHieu">

				<label>Mã loại sản phẩm:</label>
				<input type="text" id="editMaLoai">

				<!-- Nút Lưu và Hủy -->
				<button type="button" onclick="saveEdit()">Lưu</button>
				<button type="button" onclick="cancelEdit()" style="margin-left: 10px;">Hủy</button>
			</form>
		</div>
	</div>

	<!-- JS xử lý -->
	<script>
		function editProduct(btn) {
			const row = btn.closest('tr');
			const cells = row.getElementsByTagName('td');

			document.getElementById('editMaSP').value = cells[0].innerText;
			document.getElementById('editAnhSP').value = cells[1].querySelector('img').getAttribute('src');
			document.getElementById('editTenSP').value = cells[2].innerText;
			document.getElementById('editMoTa').value = cells[3].innerText;
			document.getElementById('editThuongHieu').value = cells[4].innerText;
			document.getElementById('editMaLoai').value = cells[5].innerText;

			document.getElementById('editForm').style.display = 'block';
		}

		function saveEdit() {
			const maSP = document.getElementById('editMaSP').value;
			const anhSP = document.getElementById('editAnhSP').value;
			const tenSP = document.getElementById('editTenSP').value;
			const moTa = document.getElementById('editMoTa').value;
			const thuongHieu = document.getElementById('editThuongHieu').value;
			const maLoai = document.getElementById('editMaLoai').value;

			const rows = document.querySelectorAll('#productTable tr');
			rows.forEach(row => {
				if (row.cells[0].innerText === maSP) {
					row.cells[1].innerHTML = `<img src="${anhSP}" alt="${tenSP}" width="60" class="mx-auto block">`;
					row.cells[2].innerText = tenSP;
					row.cells[3].innerText = moTa;
					row.cells[4].innerText = thuongHieu;
					row.cells[5].innerText = maLoai;
				}
			});

			alert("Cập nhật sản phẩm thành công!");
			document.getElementById('editForm').style.display = 'none';
		}

		function cancelEdit() {
			document.getElementById('formEdit').reset();
			document.getElementById('editForm').style.display = 'none';
		}

		function deleteProduct(btn) {
			const row = btn.closest('tr');
			const tenSP = row.cells[2].innerText;
			if (confirm(`Bạn có chắc chắn muốn xóa sản phẩm "${tenSP}"?`)) {
				row.remove();
				alert("Đã xóa sản phẩm.");
			}
		}
	</script>
</body>

</html>
