<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Register Form</title>
<style>
body, html {
	height: 100%;
	margin: 0;
	font-family: 'Inter', sans-serif;
}

.background-image {
	position: fixed;
	inset: 0;
	background: url('/img/backroundLogin.jpg') no-repeat center center/cover;
	filter: brightness(0.55);
	z-index: -1;
}

.center-screen {
	position: fixed;
	inset: 0;
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 1rem;
	overflow: auto;
}

.glass-container {
	background: rgba(30, 30, 30, 0.6);
	border: 1.5px solid rgba(100, 255, 255, 0.25);
	border-radius: 12px;
	backdrop-filter: blur(12px);
	box-shadow: 0 4px 30px rgba(0, 255, 255, 0.1);
	max-width: 400px;
	width: 100%;
	padding: 2rem;
	color: #e0f7fa;
}

h2 {
	font-weight: 700;
	font-size: 1.8rem;
	margin: 0.5rem 0 1rem;
	letter-spacing: 0.02em;
	text-align: center;
	color: #aeefff;
}

p {
	margin: 0.5rem 0;
}

.label-text {
	font-size: 0.9rem;
	color: #b2ebf2;
	font-weight: 500;
	display: block;
	margin-bottom: 0.4rem;
	margin-left: 2px;
}

.input-field {
	width: 100%;
	padding: 0.65rem 1rem;
	font-size: 1rem;
	border-radius: 8px;
	border: 1.5px solid rgba(100, 255, 255, 0.2);
	background: rgba(255, 255, 255, 0.05);
	color: #e0f7fa;
	margin-bottom: 1.2rem;
	box-sizing: border-box;
}

.input-field::placeholder {
	color: rgba(224, 247, 250, 0.5);
}

.input-field:focus {
	outline: none;
	border-color: #00e5ff;
	box-shadow: 0 0 4px 2px rgba(0, 229, 255, 0.5);
}

.sub-heading {
	font-size: 0.9rem;
	text-align: center;
	color: rgba(255, 255, 255, 0.6);
	margin-bottom: 1.8rem;
}

.link-login {
	color: #00e5ff;
	text-decoration: underline;
	font-weight: 600;
	cursor: pointer;
}

.password-wrapper {
	position: relative;
	width: 100%;
}

.toggle-password {
	position: absolute;
	top: 50%;
	transform: translateY(-50%);
	right: 16px;
	font-size: 0.85rem;
	color: rgba(255, 255, 255, 0.7);
	cursor: pointer;
	user-select: none;
	font-weight: 500;
}

.info-text {
	font-size: 0.7rem;
	color: rgba(255, 255, 255, 0.5);
	margin-top: 0.3rem;
	margin-bottom: 1.5rem;
	text-align: left;
	margin-left: 2px;
}

.btn-submit {
	background: #00e5ff;
	color: #003c42;
	font-weight: 600;
	width: 100%;
	padding: 0.9rem 0;
	font-size: 1.1rem;
	border-radius: 8px;
	border: none;
	cursor: pointer;
	transition: background-color 0.3s ease, transform 0.1s ease;
}

.btn-submit:hover {
	background: #00bcd4;
	transform: translateY(-1px);
}

@media ( max-width : 440px) {
	.glass-container {
		padding: 1.5rem;
	}
	h2 {
		font-size: 1.6rem;
	}
}
</style>
</head>
<body>
	<div class="background-image" aria-hidden="true"></div>

	<section class="center-screen">
		<form th:action="@{/register}" class="glass-container"
			autocomplete="off" spellcheck="false" novalidate method="post">
			<p
				style="text-transform: uppercase; font-size: 0.9rem; opacity: 0.7; text-align: center;">Đăng
				ký</p>
			<h2>TẠO TÀI KHOẢN</h2>
			<p class="sub-heading">
				Đã có tài khoản? <a href="@{/login}" class="link-login">Đăng
					nhập</a>
			</p>

			<label for="name" class="label-text">Tên tài khoản</label> <input
				id="tenDangNhap" name="tenDangNhap" type="text"
				placeholder="Tên tài khoản" class="input-field" required
				autocomplete="name" th:value="${tenDangNhap}" />
			<p th:if="${usernameError}" th:text="${usernameError}"
				style="color: #ff6b6b; font-size: 0.8rem; margin-top: -1rem; margin-bottom: 1rem;"></p>

			<label for="email" class="label-text">Email của bạn là gì</label> <input
				id="email" name="email" type="email" placeholder="example@mail.com"
				class="input-field" required autocomplete="email"
				th:value="${email}" />

			<p th:if="${emailError}" th:text="${emailError}"
				style="color: #ff6b6b; font-size: 0.8rem; margin-top: -1rem; margin-bottom: 1rem;"></p>

			<label for="password" class="label-text">Mật khẩu</label>
			<div class="password-wrapper">
				<input id="matKhau" name="matKhau" type="password"
					placeholder="Nhập mật khẩu" class="input-field" required
					autocomplete="new-password" aria-describedby="passwordHelp" />
			</div>

			<p th:if="${passwordError}" th:text="${passwordError}"
				style="color: #ff6b6b; font-size: 0.8rem; margin-top: -1rem; margin-bottom: 1rem;"></p>


			<label for="xacNhanMatKhau" class="label-text">Xác nhận mật
				khẩu</label>
			<div class="password-wrapper">
				<input id="xacNhanMatKhau" name="xacNhanMatKhau" type="password"
					placeholder="Nhập lại mật khẩu" class="input-field" required
					autocomplete="new-password" />
			</div>
			<p th:if="${confirmError}" th:text="${confirmError}"
				style="color: #ff6b6b; font-size: 0.8rem; margin-top: -1rem; margin-bottom: 1rem;"></p>

			<button type="submit" class="btn-submit">Tạo tài Khoản</button>
		</form>
	</section>
</body>
<script>
	document
			.querySelector("form")
			.addEventListener(
					"submit",
					function(e) {
						const mk = document.getElementById("matKhau").value;
						const xacNhan = document
								.getElementById("xacNhanMatKhau").value;

						const errorConfirm = document
								.getElementById("errorMessage");
						const errorPassword = document
								.getElementById("passwordError");

						let hasError = false;

						// Regex: ít nhất 8 ký tự, có chữ cái, số, ký hiệu
						const pattern = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).{8,}$/;

						if (!pattern.test(mk)) {
							errorPassword.style.display = "block";
							hasError = true;
						} else {
							errorPassword.style.display = "none";
						}

						if (mk !== xacNhan) {
							errorConfirm.style.display = "block";
							hasError = true;
						} else {
							errorConfirm.style.display = "none";
						}

						if (hasError) {
							e.preventDefault(); // chặn gửi form nếu có lỗi
						}
					});

	document.querySelector("form").addEventListener("submit", function(e) {
		const mk = document.getElementById("matKhau").value;
		const xacNhan = document.getElementById("xacNhanMatKhau").value;
		const errorMessage = document.getElementById("errorMessage");

		if (mk !== xacNhan) {
			errorMessage.style.display = "block";
			e.preventDefault(); // Ngăn submit
		} else {
			errorMessage.style.display = "none"; // Ẩn nếu đúng
		}
	});
</script>


</html>